{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiParams = new URLSearchParams({\n    key: \"10224742-53a1a7880f946c3462445b43a\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\"\n});\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const getImages = async (searchQuery, page = 1) => {\n    const response = await axios.get(`/?${apiParams}&q=${searchQuery}`, {\n        params: {\n            page: page,\n            per_page: 15\n        }\n    })\n    return response.data;\n};","export function createImageTemplate (pictureArr) {\n    return pictureArr.reduce((acc, el, idx, arr) => {\n        return acc +\n            `<li class=\"gallery-item\">\n            <a class=\"gallery-item-content\" href=\"${el.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${el.webformatURL}\"\n                    alt=\"${el.tags}\"\n                    />\n                <ul class=\"card-porperties\">\n                <li class=\"property-el\">\n                    <p class=\"property-title\">Likes</p>\n                    <p class=\"property-text\">${el.likes}</p>\n                </li>\n                <li class=\"property-el\">\n                    <p class=\"property-title\">Views</p>\n                    <p class=\"property-text\">${el.views}</p>\n                </li>\n                <li class=\"property-el\">\n                    <p class=\"property-title\">Comments</p>\n                    <p class=\"property-text\">${el.comments}</p>\n                </li>\n                <li class=\"property-el\">\n                    <p class=\"property-title\">Downloads</p>\n                    <p class=\"property-text\">${el.downloads}</p>\n                </li>\n                </ul>\n            </a>\n        </li>`\n    }, '')\n};","// IMPORT START --------------------------------------------------\n// IziToast Import\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\niziToast.settings({\n    titleColor: 'white',\n    messageColor: 'white',\n    backgroundColor: 'red',\n    position: 'topRight',\n    maxWidth: 432,\n});\n\n// Simple Light Box\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Other JS functions\nimport { getImages } from \"./js/pixabay-api.js\"\nimport { createImageTemplate } from \"./js/render-functions.js\"\n\n// IMPORT END --------------------------------------------------\n\n// Find all elements on the DOM\nconst galleryEl = document.querySelector(\".js-gallery\");\nconst formElement = document.querySelector(\"form\");\nconst preloaderElement = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".js-load-more\");\n\n// Set variables\nlet page = 1;\nlet elementsPerPage = 15;\nlet searchQuery = '';\nlet gallery = new SimpleLightbox('.js-gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250,\n});\ngallery.on('error.simplelightbox', function (e) {\n        console.log(e); // some usefull information\n        });\n\n\n// SUBMIT BUTTON\nconst submitQuery = formElement.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    \n    const formData = new FormData(formElement);\n    searchQuery = formData.get(\"search-query\");\n\n    // Перевірка на пусте поле та пробіли\n    if (!searchQuery.trim()) {\n        alert('Please enter the search query')\n        return\n    }\n\n    // Setting defaults\n    page = 1;\n    galleryEl.innerHTML = '';\n    preloaderElement.removeAttribute('hidden')\n\n    getImages(searchQuery, page)\n        .then(data => {\n            \n            // Info\n            // console.log(`Total elements: ${data.total}`); // Total results on Query\n\n            preloaderElement.setAttribute('hidden', '');\n            console.log()\n            if (Object.keys(data.hits).length >= elementsPerPage) {\n            btnLoadMore.removeAttribute('hidden')\n            } else if (data.total === 0) {\n                iziToast.show({ message: `Sorry, there are no images matching your search query. Please try again!` });\n                return null;\n            };\n        // Create HTML markup for recieved images\n        const listImages = createImageTemplate(data.hits);\n        return listImages;\n    })\n    .then(listImages => {\n        // Place recieved images in HTML\n        galleryEl.innerHTML = listImages;\n\n        // SimpleLightBox\n        gallery.refresh();\n\n    })\n        .catch(error => { console.log(error) });   \n})\n\n\n\n// LOAD MORE BUTTON CLICK\nconst onLoadMore = btnLoadMore.addEventListener(\"click\", event => {\n    ++page; // Increase page number on each click\n    preloaderElement.removeAttribute('hidden');\n    btnLoadMore.setAttribute('hidden', '');\n\n    getImages(searchQuery, page)\n        .then(data => {\n\n            preloaderElement.setAttribute('hidden', '');\n\n            if (Object.keys(data.hits).length < elementsPerPage) {\n                btnLoadMore.setAttribute('hidden', '');\n                iziToast.settings({\n                    titleColor: 'steelblue',\n                    messageColor: 'steelblue',\n                    backgroundColor: 'lightcyan',\n                    position: 'topRight',\n                    maxWidth: 432,\n                });\n                iziToast.show({ message: `We're sorry, but you've reached the end of search results.` });\n            } else {\n                btnLoadMore.removeAttribute('hidden');\n            }\n    \n            // Create HTML markup for recieved images\n            const listImages = createImageTemplate(data.hits);\n            return listImages;\n        })\n        .then(listImages => {\n            // Place recieved images in HTML \n            galleryEl.insertAdjacentHTML('beforeend', listImages);\n\n            // Scroll on 2xCard Height\n            const galleryCard = document.querySelector(\".gallery-item\");\n            let imageHeight = galleryCard.getBoundingClientRect().height;\n            const scrollLength = imageHeight * 2;\n            window.scrollBy(0, scrollLength);\n\n            // SimpleLightBox refresh\n            gallery.refresh();\n\n        })\n        .catch(error => { console.log(error) });\n\n});\n"],"names":["apiParams","axios","getImages","searchQuery","page","createImageTemplate","pictureArr","acc","el","idx","arr","iziToast","galleryEl","formElement","preloaderElement","btnLoadMore","elementsPerPage","gallery","SimpleLightbox","e","event","data","listImages","error","scrollLength"],"mappings":"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"}